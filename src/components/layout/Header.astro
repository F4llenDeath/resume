---
import { Moon, Sun, Download } from 'lucide-astro'
---

<header class="mb-12 flex w-full flex-wrap pb-3 text-sm sm:flex-nowrap sm:justify-start">
  <nav
    class="relative mx-auto flex w-full items-center justify-between sm:flex sm:items-center"
    aria-label="global"
  >
    <a
      class="flex shrink-0 items-center gap-2 text-xl font-medium"
      href="https://www.f4llendeath.me"
      aria-label="Brand"
      >F4llenDeath</a
    >

    <div class="flex flex-row items-center justify-center gap-x-5 sm:gap-x-7">
      <button
        id="toggleDarkMode"
        class="relative rounded-md border border-border p-1.5 transition-all hover:bg-border"
      >
        <span class="sr-only">Toggle dark mode</span>
        <Moon class="h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:hidden dark:-rotate-90 dark:scale-0" />
        <Sun class="hidden h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:block dark:rotate-0 dark:scale-100" />
      </button>
      <a
        href="https://resume.xichengyang.me/Resume%20-%20Xicheng%20Yang.pdf"
        class="relative rounded-md border border-border p-1.5 transition-all hover:bg-border"
        aria-label="Download Resume"
        target="_blank"
        rel="noopener"
      >
        <Download class="h-[1.2rem] w-[1.2rem]" />
      </a>
    </div>
  </nav>
</header>

<script>
  function getCurrentTheme() {
    return localStorage.getItem('theme')
  }
  const toggleDarkModeButton = document.getElementById('toggleDarkMode')

  toggleDarkModeButton?.addEventListener('click', () => {
    const toggleDarkModeEvent = new CustomEvent('theme-change', {
      detail: { theme: getCurrentTheme() === 'light' ? 'dark' : 'light' }
    })
    document.dispatchEvent(toggleDarkModeEvent)
  })
</script>
